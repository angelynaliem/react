{"ast":null,"code":"var _jsxFileName = \"/Users/angelynaliem/react/devdesk/src/components/Login.js\";\nimport React, { useState, useEffect } from \"react\";\nimport * as yup from \"yup\";\nimport axios from \"axios\";\nimport { axiosAuth } from \"./utils/axiosAuth\";\nimport { Button, Form, FormGroup, Label, Input, NavLink, Container, Col, FormFeedback, Spinner } from \"reactstrap\";\nimport { useHistory, Route } from \"react-router-dom\";\nimport \"./Login.css\";\nimport StudentNav from \"./students/StudentNav\";\n\nconst Login = props => {\n  const history = useHistory();\n\n  const goHome = () => {\n    console.log(\"Going home\");\n    history.push(\"/\");\n  };\n\n  const goRegister = () => {\n    console.log(\"Going to register\");\n    history.push(\"/register\");\n  };\n\n  const goStudentDashboard = () => {\n    console.log(\"Going to student dashboard\");\n    history.push(\"/student_dashboard\");\n  }; //Set the state for user\n\n\n  const [user, setUser] = useState({\n    email: \"\",\n    password: \"\"\n  }); //Set the state for error\n\n  const [errors, setErrors] = useState({\n    email: \"\",\n    password: \"\"\n  }); //Set the state for server error\n\n  const [serverError, setServerError] = useState(\"\"); //Set the state for button\n\n  const [button, setButton] = useState(true); //Form schema for login\n\n  const formSchema = yup.object().shape({\n    username: yup.string().required(\"Email is required\"),\n    password: yup.string().required(\"Password is required\") // .matches(\n    //   /^(?=.*[A-Za-z])(?=.*\\d)(?=.*[@$!%*#?&])[A-Za-z\\d@$!%*#?&]{8,}$/,\n    //   \"Must Contain 8 Characters, One Uppercase, One Lowercase, One Number and one Special Case Character\"\n    // ),\n\n  }); //Form validation function for login\n\n  const validateChange = e => {\n    yup.reach(formSchema, e.target.name).validate(e.target.name ? e.target.value : null).then(valid => {\n      setErrors({ ...errors,\n        [e.target.name]: \"\" //Clear any error messages\n\n      });\n    }).catch(err => {\n      console.log(err);\n      setErrors({ ...errors,\n        [e.target.name]: err.errors[0] //Display the error message\n\n      });\n    });\n  }; //Handle user input changes for login\n\n\n  const handleChanges = e => {\n    e.persist(); // console.log(\"new input here!\", e.target.value);\n    // const newUser = { ...user, [e.target.name]: e.target.value };\n\n    validateChange(e);\n    setUser({ ...user,\n      [e.target.name]: e.target.value\n    });\n  }; //Submit form function for login\n\n\n  const submitForm = e => {\n    e.preventDefault();\n    console.log(\"Form submitted!\");\n    console.log(user);\n    axios.post(\"/api/auth/login\", user) //Temporary API\n    .then(response => {\n      console.log(\"POST is successful!\", response.data);\n      window.localStorage.setItem(\"token\", response.data.token);\n      props.history.push(\"/student_dashboard\");\n      setServerError(null);\n      setUser({\n        email: \"\",\n        password: \"\"\n      }); //Clear the form\n    }).catch(err => {\n      setServerError(\"API POST request failed!\");\n    });\n  }; //If everything checks, then button is enabled\n\n\n  useEffect(() => {\n    formSchema.isValid(user).then(isValid => {\n      setButton(!isValid);\n    });\n  }, [user]);\n  if (!user) return /*#__PURE__*/React.createElement(Spinner, {\n    color: \"info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 21\n    }\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(StudentNav, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 9\n    }\n  }, \"We're here to help.\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 9\n    }\n  }, \"Create a help ticket and we'll connect you \", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 54\n    }\n  }), \" with a Lambda School Helper.\"), /*#__PURE__*/React.createElement(Container, {\n    className: \"form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    onSubmit: submitForm,\n    className: \"formGroup\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 11\n    }\n  }, serverError ? /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 28\n    }\n  }, serverError) : null, /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FormGroup, {\n    className: \"username\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    htmlFor: \"email\",\n    xs: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    type: \"text\",\n    name: \"email\",\n    id: \"email\",\n    placeholder: \"Email\",\n    value: user.email,\n    onChange: handleChanges,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 19\n    }\n  }), errors.email.length > 0 ? /*#__PURE__*/React.createElement(\"p\", {\n    className: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 21\n    }\n  }, errors.email) : null))), /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FormGroup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    htmlFor: \"password\",\n    xs: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    type: \"password\",\n    name: \"password\",\n    id: \"password\",\n    placeholder: \"Password\",\n    value: user.password,\n    onChange: handleChanges,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 19\n    }\n  }), errors.password.length > 0 ? /*#__PURE__*/React.createElement(\"p\", {\n    className: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 21\n    }\n  }, errors.password) : null))), /*#__PURE__*/React.createElement(FormGroup, {\n    check: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    htmlFor: \"check\",\n    check: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    type: \"checkbox\",\n    name: \"check\",\n    id: \"check\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 17\n    }\n  }), \" Remember me\")), /*#__PURE__*/React.createElement(NavLink, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 13\n    }\n  }, \"Forgot username/password?\"), /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    disabled: button,\n    onClick: goStudentDashboard,\n    className: \"buttonForm\",\n    style: {\n      backgroundColor: \"#74CBC1\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 13\n    }\n  }, \"Login\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"navRegister\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(NavLink, {\n    className: \"nonClick\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 11\n    }\n  }, \"Haven't registered? \"), /*#__PURE__*/React.createElement(NavLink, {\n    onClick: goRegister,\n    className: \"click\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 11\n    }\n  }, \"Click here\"))));\n};\n\nexport default Login;","map":{"version":3,"sources":["/Users/angelynaliem/react/devdesk/src/components/Login.js"],"names":["React","useState","useEffect","yup","axios","axiosAuth","Button","Form","FormGroup","Label","Input","NavLink","Container","Col","FormFeedback","Spinner","useHistory","Route","StudentNav","Login","props","history","goHome","console","log","push","goRegister","goStudentDashboard","user","setUser","email","password","errors","setErrors","serverError","setServerError","button","setButton","formSchema","object","shape","username","string","required","validateChange","e","reach","target","name","validate","value","then","valid","catch","err","handleChanges","persist","submitForm","preventDefault","post","response","data","window","localStorage","setItem","token","isValid","length","backgroundColor"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport * as yup from \"yup\";\nimport axios from \"axios\";\nimport { axiosAuth } from \"./utils/axiosAuth\";\nimport {\n  Button,\n  Form,\n  FormGroup,\n  Label,\n  Input,\n  NavLink,\n  Container,\n  Col,\n  FormFeedback,\n  Spinner,\n} from \"reactstrap\";\nimport { useHistory, Route } from \"react-router-dom\";\nimport \"./Login.css\";\nimport StudentNav from \"./students/StudentNav\";\n\nconst Login = (props) => {\n  const history = useHistory();\n\n  const goHome = () => {\n    console.log(\"Going home\");\n    history.push(\"/\");\n  };\n\n  const goRegister = () => {\n    console.log(\"Going to register\");\n    history.push(\"/register\");\n  };\n\n  const goStudentDashboard = () => {\n    console.log(\"Going to student dashboard\");\n    history.push(\"/student_dashboard\");\n  };\n\n  //Set the state for user\n  const [user, setUser] = useState({ email: \"\", password: \"\" });\n\n  //Set the state for error\n  const [errors, setErrors] = useState({ email: \"\", password: \"\" });\n\n  //Set the state for server error\n  const [serverError, setServerError] = useState(\"\");\n\n  //Set the state for button\n  const [button, setButton] = useState(true);\n\n  //Form schema for login\n  const formSchema = yup.object().shape({\n    username: yup.string().required(\"Email is required\"),\n    password: yup\n      .string()\n      .required(\"Password is required\")\n      // .matches(\n      //   /^(?=.*[A-Za-z])(?=.*\\d)(?=.*[@$!%*#?&])[A-Za-z\\d@$!%*#?&]{8,}$/,\n      //   \"Must Contain 8 Characters, One Uppercase, One Lowercase, One Number and one Special Case Character\"\n      // ),\n  });\n\n  //Form validation function for login\n  const validateChange = (e) => {\n    yup\n      .reach(formSchema, e.target.name)\n      .validate(e.target.name ? e.target.value : null)\n      .then((valid) => {\n        setErrors({\n          ...errors,\n          [e.target.name]: \"\", //Clear any error messages\n        });\n      })\n      .catch((err) => {\n        console.log(err);\n        setErrors({\n          ...errors,\n          [e.target.name]: err.errors[0], //Display the error message\n        });\n      });\n  };\n\n  //Handle user input changes for login\n  const handleChanges = (e) => {\n    e.persist();\n    // console.log(\"new input here!\", e.target.value);\n    // const newUser = { ...user, [e.target.name]: e.target.value };\n    validateChange(e);\n    setUser({ ...user, [e.target.name]: e.target.value });\n  };\n\n  //Submit form function for login\n  const submitForm = (e) => {\n    e.preventDefault();\n    console.log(\"Form submitted!\");\n    console.log(user);\n\n    axios\n      .post(\"/api/auth/login\", user) //Temporary API\n      .then((response) => {\n        console.log(\"POST is successful!\", response.data);\n        window.localStorage.setItem(\"token\", response.data.token);\n        props.history.push(\"/student_dashboard\");\n        setServerError(null);\n        setUser({ email: \"\", password: \"\"}); //Clear the form\n      })\n      .catch((err) => {\n        setServerError(\"API POST request failed!\");\n      });\n  };\n\n  //If everything checks, then button is enabled\n  useEffect(() => {\n    formSchema.isValid(user).then((isValid) => {\n      setButton(!isValid);\n    });\n  }, [user]);\n\n  if (!user) return <Spinner color=\"info\" />;\n\n  return (\n    <div>\n      <StudentNav />\n      <div className=\"login\">\n        <h2>We're here to help.</h2>\n        <p>\n          Create a help ticket and we'll connect you <br></br> with a Lambda\n          School Helper.\n        </p>\n\n        <Container className=\"form\">\n          <Form onSubmit={submitForm} className=\"formGroup\">\n            {serverError ? <p>{serverError}</p> : null}\n\n            {/* Username Field */}\n            <Col>\n              <FormGroup className=\"username\">\n                <Label htmlFor=\"email\" xs={4}>\n                  <Input\n                    type=\"text\"\n                    name=\"email\"\n                    id=\"email\"\n                    placeholder=\"Email\"\n                    value={user.email}\n                    onChange={handleChanges}\n                  ></Input>\n                  {errors.email.length > 0 ? (\n                    <p className=\"error\">{errors.email}</p>\n                  ) : null}\n                </Label>\n              </FormGroup>\n            </Col>\n\n            {/* Password Field */}\n            <Col>\n              <FormGroup>\n                <Label htmlFor=\"password\" xs={4}>\n                  <Input\n                    type=\"password\"\n                    name=\"password\"\n                    id=\"password\"\n                    placeholder=\"Password\"\n                    value={user.password}\n                    onChange={handleChanges}\n                  ></Input>\n                  {errors.password.length > 0 ? (\n                    <p className=\"error\">{errors.password}</p>\n                  ) : null}\n                </Label>\n              </FormGroup>\n            </Col>\n\n            <FormGroup check>\n              <Label htmlFor=\"check\" check>\n                <Input type=\"checkbox\" name=\"check\" id=\"check\" /> Remember me\n              </Label>\n            </FormGroup>\n\n            <NavLink>Forgot username/password?</NavLink>\n\n            <Button\n              type=\"submit\"\n              disabled={button}\n              onClick={goStudentDashboard}\n              className=\"buttonForm\"\n              style={{ backgroundColor: \"#74CBC1\" }}\n            >\n              Login\n            </Button>\n          </Form>\n        </Container>\n\n        {/* If user hasn't registered, they would click the Register button instead and go to Eric's Register page*/}\n        <div className=\"navRegister\">\n          <NavLink className=\"nonClick\">Haven't registered? </NavLink>\n          <NavLink onClick={goRegister} className=\"click\">\n            Click here\n          </NavLink>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}